function [fitresult, gof] = coherence_sodium_fit(x, y, xdata, ydata)
%CREATEFIT(X,Y)
%  Create a fit.
%
%  Data for 'Coherence Length' fit:
%      X Input : x
%      Y Output: y
%  Output:
%      fitresult : a fit object representing the fit.
%      gof : structure with goodness-of fit info.
%
%  See also FIT, CFIT, SFIT.

%  Auto-generated by MATLAB on 11-Mar-2018 16:16:11


%% Fit: 'Coherence Length'.
[xData, yData] = prepareCurveData( x, y );

% Set up fittype and options.
ft = fittype( 'exp1' );
excludedPoints = excludedata( xData, yData, 'Indices', [16 17 18 19 20 21 22 23 24] );
opts = fitoptions( 'Method', 'NonlinearLeastSquares' );
opts.Display = 'Off';
opts.StartPoint = [0.224365212785692 0.449438230794833];
opts.Exclude = excludedPoints;

% Fit model to data.
[fitresult, gof] = fit( xData, yData, ft, opts );

% Plot fit with data.
figure1 = figure( 'Name', 'Coherence Length' );

axes1 = axes('Parent',figure1);
hold(axes1,'on');

% subplot(1,2,1);
h = plot( fitresult, xData, yData, 'predobs');
legend( h, 'Envelope Peaks', 'Coherence Length', 'Lower bounds', 'Upper bounds', 'Location', 'NorthEast' );
% Label axes
title('Fit to determine Coherence Length');
xlabel('x (mm)')
ylabel('y (arb. units)')
xlim([0,3.3]);
ylim([0.1,1.1]);

% box(axes1,'on');
% grid(axes1,'on');
% % Set the remaining axes properties
% set(axes1,'FontSize',16);

grid on

figure1 = figure
axes1 = axes('Parent',figure1);
hold(axes1,'on');
% subplot(1,2,2);
plot(xdata, ydata);
xlim([0, 5.7]);
xlabel('x (mm)')
ylabel('Intensity')
title('Interference pattern of Sodium Lamp')

box(axes1,'on');
grid(axes1,'on');
% Set the remaining axes properties
set(axes1,'FontSize',16);


